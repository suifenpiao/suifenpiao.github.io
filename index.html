<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>暮色随风 - 碌碌无为时看到太阳升起</title><meta name="author" content="zha0fe1"><meta name="copyright" content="zha0fe1"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="江湖夜雨十年灯">
<meta property="og:type" content="website">
<meta property="og:title" content="暮色随风">
<meta property="og:url" content="https://musewithwind.gitee.io/index.html">
<meta property="og:site_name" content="暮色随风">
<meta property="og:description" content="江湖夜雨十年灯">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/touxiang.webp">
<meta property="article:author" content="zha0fe1">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/touxiang.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://musewithwind.gitee.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://file.crazywong.com/npm/@fancyapps/ui@latest/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: zha0fe1","link":"链接: ","source":"来源: 暮色随风","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '暮色随风',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-10-15 02:48:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/touxiang.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/bizhi.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">暮色随风</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">暮色随风</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:1379887009@qq.com" target="_blank" title="Email"><i class="QQ"></i></a><a class="social-icon" href="https://github.com/suifen" target="_blank" title="Github"><i class="github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/12/0143%20SSRF/" title="SSRF"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSRF"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/12/0143%20SSRF/" title="SSRF">SSRF</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-10-12T05:18:00.000Z" title="发表于 2023-10-12 13:18:00">2023-10-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">
众测中发现形如xxx.com&#x2F;?url&#x3D;xxx.com,看到一个测一个


CTF中,发现代码:
1234\$ch=curl_init(\$url);  curl_setopt($ch, CURLOPT_HEADER, 0);  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  \$result=curl_exec(\$ch);
或存在file_get_content(url)等,考虑ssrf考点看到url作为参数就测就完事了

相关
原理

服务器端所提供的接口中包含了所要请求内容的URL参数，并且未对客户端所传输过来的URL参数进行过滤，导致攻击者可以传入任意的地址来让后端服务器对其发起请求，并返回对该目标地址请求的数据。因此存在SSRF漏洞的服务器通常被作为跳板机来取得外网或内网其它应用服务器的信息。

危害

钓鱼对外网、服务器所在内网、本地进行端口、资产发现读取本地文件配合其它漏洞攻击内网其它机器

常用打配合协议

file: http://xxx.com?url=file:///var/www/html/in ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/09/15/0134%20redis%E6%B8%97%E9%80%8F%E5%A7%BF%E5%8A%BF/" title="redis渗透姿势"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis渗透姿势"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/15/0134%20redis%E6%B8%97%E9%80%8F%E5%A7%BF%E5%8A%BF/" title="redis渗透姿势">redis渗透姿势</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-15T05:48:00.000Z" title="发表于 2023-09-15 13:48:00">2023-09-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">
redis默认端口: 6379

Redis常用命令：123456789101112131415161718set xz &quot;Hacker&quot;                     # 设置键xz的值为字符串Hacker      get xz                     # 获取键xz的内容  SET score 857                       # 设置键score的值为857 INCR score  # 使用INCR命令将score的值增加1 GET score                     # 获取键score的内容   keys *                        # 列出当前数据库中所有的键  config set protected-mode no        # 关闭安全模式   get anotherkey                      # 获取一个不存在的键的值 config set dir /root/redis          # 设置保存目录   config set d ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/09/14/0132%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/" title="权限提升"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="权限提升"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/14/0132%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/" title="权限提升">权限提升</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-09-14T05:45:00.000Z" title="发表于 2023-09-14 13:45:00">2023-09-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">Webshell权限JSP权限: root
PHP权限: www(id&#x3D;1001) &#x2F; xiaodi-pc&#x2F;xiaodi
ASP&#x2F;ASPX权限: nt authority\network service
权限划分Linuxuid&#x3D;0: root &#x3D; system
uid&#x3D;1-999 &#x3D;  administrator
uid&#x3D; &gt;&#x3D;1000 服务权限
Windows权限: 
system
administrator
usr
guest
等
提权
前提条件： 获得一个低权限shell

工具提权MSF提权获取meterpreter后,执行getuid发现为低权用户,执行background暂时离开session会话,执行
use post/multi/recon/local_exploit_suggester
设置set showdescription true  set session session编号,然后run
获取提权建议exploit,再use进行攻击即可
获取不到sess ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/07/27/0120%20log4j/" title="log4j"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="log4j"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/07/27/0120%20log4j/" title="log4j">log4j</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-27T04:46:00.000Z" title="发表于 2023-07-27 12:46:00">2023-07-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">圈子里有人上传了一个靶场资源，打出多处文件上传，xss，逻辑漏洞后想着有没有更多的洞，于是用awvs扫了一下靶场，发现存在log4j漏洞，于是进行利用，故产生了此文

AWVS漏洞数据包

1234567GET /mall/product?product_name=%24%7Bj%24%7B::-n%7Ddi:dns%24%7B::-:%7D//hitsomefxhewm7ffcc%24%7B::-.%7Dbxss.me%7Dzzzz HTTP/1.1Cookie: JSESSIONID=5FBB32760A76DA6820B3E41F8A43B2AEAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Encoding: gzip,deflate,brUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4512.0 Safari ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/07/24/0118%20Shiro/" title="Shiro漏洞复现"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Shiro漏洞复现"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/07/24/0118%20Shiro/" title="Shiro漏洞复现">Shiro漏洞复现</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-24T10:13:00.000Z" title="发表于 2023-07-24 18:13:00">2023-07-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">CVE-2010-3863

Shiro &lt; 1.1.0
JSecurity 0.9.X
认证失效


未登录访问/admin将跳转到login.jsp,使用/./admin即可绕过验证
整个过程并没有对路径进行标准化处理(去除路径中的/./、\\以及其他一些特殊符号)导致直接./绕过
CVE-2014-0074&#x2F;Shiro-460

Shiro &lt; 1.2.3
空白名登录


shiro 550
漏洞利用流程:


漏洞发现fofa: app&#x3D;”Apache-shiro”cookie:rememberMe
漏洞利用工具准备ysoserial:反序列化漏洞利用工具，有多种利用链，下载链接
shiro.py(检测可用的key)
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/07/12/0113%20CTF-python%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-JWT/" title="由CTF引出的py反序列化与JWT"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/ctf.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="由CTF引出的py反序列化与JWT"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/07/12/0113%20CTF-python%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-JWT/" title="由CTF引出的py反序列化与JWT">由CTF引出的py反序列化与JWT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-12T09:21:00.000Z" title="发表于 2023-07-12 17:21:00">2023-07-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">
CISCN2019 华北赛区 Day1 Web2 - ikun

技能点：

巧用BP intruder
JWT爆破
python反序列化&amp;脚本编写

巧用BP intruder进入题目链接，注意到banner栏下有一行字：ikun们冲鸭,一定要买到lv6!!!(6)
向下翻找发现都是某站等级的小电视购买链接，翻了几页没有一个lv6的，打开f12查看其他等级的特征，发现lv3等级的小电视链接，存在图片/static/img/lv/lv3.png,其他等级也如此,那对于lv6也应该存在这样的特征翻页过程中发现链接后存在page参数,想到对该参数利用bp-intruder进行爆破,这里我将page字典设为0-1000,在bp的grep-Match中,添加了lv6特征字段,开始爆破发现在page=181处,lv6返回1,访问看到lv6对应链接

py脚本跑lv6:
12345678910import requestsfrom time import *url=&quot;http://63ab8612-b1df-4ca2-85e4-e7b7c1900b7c.node3.buuoj. ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/06/29/0111%20Fastjson%20%E5%A4%8D%E7%8E%B0/" title="Fastjson 基础知识+多版本复现"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/Fastjson.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Fastjson 基础知识+多版本复现"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/06/29/0111%20Fastjson%20%E5%A4%8D%E7%8E%B0/" title="Fastjson 基础知识+多版本复现">Fastjson 基础知识+多版本复现</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-29T03:00:00.000Z" title="发表于 2023-06-29 11:00:00">2023-06-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">漏洞成因Fastjson是一款Java语言制作的速度最快的json处理组件，可将json内容反序列化&#x2F;序列化为Java对象&#x2F;json对象.其中,序列化对象将调用对象的getter方法,私有变量将不会调用.反序列化对象将调用对方的setter方法,若反序列化对象的setter方法中存在危险操作且没有 合理的检查,则很有可能被利用同时,反序列化对象的过程中存在目标的抽象类&#x2F;接口丢失问题，从而导致反序列化无法正常进行，为了解决该问题，fastjson引入autotype字段以声明目标的抽象类或接口(形如@Type:com.xxx ),该字段引入了Java类且没有任何检查 ,让攻击变得有可能
漏洞payload类
以下是几个setter方法中有敏感操作的类


com.sun.rowset
JdbcRowSetlmpl
Templateslmpl
com.sun.org.apache.xalan.internal.xsltc.trax

前置知识JNDI
什么是JNDI？(GPT)

JNDI（Java Naming and Directory Interface ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/06/23/0110%20HW%E9%9D%A2%E8%AF%95/" title="蓝初面试"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="蓝初面试"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/06/23/0110%20HW%E9%9D%A2%E8%AF%95/" title="蓝初面试">蓝初面试</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-23T01:55:00.000Z" title="发表于 2023-06-23 09:55:00">2023-06-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">蓝初
蓝队面试题整理面试题总结

SQL注入分类按照注入点分类数字型注入当我们访问页面时经常会出现http:xxx.com?id&#x3D;1这种形式的url，这个时候我们输入and 1&#x3D;1与and 1&#x3D;2,进行判定看是否会出现and 1&#x3D;1回显正常，and 1&#x3D;2回显不正常的情况。如果出现了我们一般就认为这里存在注入，并且是数字型注入。如果没有出现那么并不能排查这里没有注入，只是排除这里不存在数字型的注入。
数字型注入还可以利用数字的增减操作进行布尔盲注，避免使用and，or 等敏感词
12id=3-1id=1%2b1

字符型xxx.com?id&#x3D;1
同样的url，我们输入 ‘ 看是否会出现报错的现象。如果存在我们可以进一步的闭合我们的语句。
123select * from table where id=&#x27;1&#x27;加入’ and 1=1 #select * from table where id=&#x27;1&#x27; and 1=1 # &#x27;

搜索型搜索框内会使用这样形式的sql语句进行查询
123 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/05/0108%20xhcms-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%AE%A1%E8%AE%A1/" title="xhcms-报错注入审计"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xhcms-报错注入审计"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/05/0108%20xhcms-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%AE%A1%E8%AE%A1/" title="xhcms-报错注入审计">xhcms-报错注入审计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-05T07:00:00.000Z" title="发表于 2023-05-05 15:00:00">2023-05-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">查看页面，发现在url/?r=contact有留言处:

昵称处输入&#39;直接报错，说明存在sql注入，开始审计代码
12345678//index.php&lt;?php  //单一入口模式  error_reporting(0); //关闭错误显示  $file=addslashes($_GET[&#x27;r&#x27;]); //接收文件名  $action=$file==&#x27;&#x27;?&#x27;index&#x27;:$file; //判断为空或者等于index  include(&#x27;files/&#x27;.$action.&#x27;.php&#x27;); //载入相应文件  ?&gt;

存在r参数且不为空时,包含files/r的值.php文件不存在或为空时,默认调用index.php所以我们访问的就是files/contact.php


跟进contact.php:
12//line143:&lt;form  name=&quot;form&quot; method=&quot;post&quot; action=&quot;/?r=su ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/05/04/sqlmap%E4%BD%BF%E7%94%A8/" title="sqlmap使用"><img class="post_bg" src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/SQL_Injection.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sqlmap使用"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/04/sqlmap%E4%BD%BF%E7%94%A8/" title="sqlmap使用">sqlmap使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-04T15:51:00.000Z" title="发表于 2023-05-04 23:51:00">2023-05-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">
参考文章

基本用法
查看sqlmap版本
python sqlmap.py –version(win)&#x2F;sqlmap –version(kali)


查看简要的帮助信息，参数及含义
python sqlmap.py -h&#x2F;sqlmap -h


查询高级帮助信息
Python sqlmap.py -hh&#x2F;sqlmap -hh


复制网址时记得带上注入点例如’?id&#x3D;1
若参数不为1则带上双引号1”



基础实战
URL
找注入点并检测：
sqlmap –u “链接”


列库显示数据库：
sqlmap –u “链接” –dbs


列表显示表：
sqlmap –u “链接” –D 数据库 –tables


列字段显示表中字段： 
sqlmap –u “链接” –D 数据库 –T 表名 –columns


显示字段内容：
sqlmap –u “链接” –D 数据库 –T 表名 –C “字段1 字段2 字段3” –dump


文件
文件中注入点后加”*“号
sqlmap -r txt 文件路径



进阶sqlmap超详细笔记
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/touxiang.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zha0fe1</div><div class="author-info__description">江湖夜雨十年灯</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://m.weibo.cn/u/7713352758?uid=7713352758&amp;t=0&amp;luicode=10000011&amp;lfid=100103type%3D1%26q%3D%E5%AF%B9%E6%8A%97%E6%97%A0%E6%84%8F%E4%B9%89"><i class="fab fa-github"></i><span>More</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:1379887009@qq.com" target="_blank" title="Email"><i class="QQ"></i></a><a class="social-icon" href="https://github.com/suifen" target="_blank" title="Github"><i class="github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">回首向来萧瑟处,归去,也无风雨也无晴</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/10/12/0143%20SSRF/" title="SSRF"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSRF"/></a><div class="content"><a class="title" href="/2023/10/12/0143%20SSRF/" title="SSRF">SSRF</a><time datetime="2023-10-12T05:18:00.000Z" title="发表于 2023-10-12 13:18:00">2023-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/15/0134%20redis%E6%B8%97%E9%80%8F%E5%A7%BF%E5%8A%BF/" title="redis渗透姿势"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis渗透姿势"/></a><div class="content"><a class="title" href="/2023/09/15/0134%20redis%E6%B8%97%E9%80%8F%E5%A7%BF%E5%8A%BF/" title="redis渗透姿势">redis渗透姿势</a><time datetime="2023-09-15T05:48:00.000Z" title="发表于 2023-09-15 13:48:00">2023-09-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/14/0132%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/" title="权限提升"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="权限提升"/></a><div class="content"><a class="title" href="/2023/09/14/0132%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/" title="权限提升">权限提升</a><time datetime="2023-09-14T05:45:00.000Z" title="发表于 2023-09-14 13:45:00">2023-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/27/0120%20log4j/" title="log4j"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="log4j"/></a><div class="content"><a class="title" href="/2023/07/27/0120%20log4j/" title="log4j">log4j</a><time datetime="2023-07-27T04:46:00.000Z" title="发表于 2023-07-27 12:46:00">2023-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/24/0118%20Shiro/" title="Shiro漏洞复现"><img src="https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/hacker.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Shiro漏洞复现"/></a><div class="content"><a class="title" href="/2023/07/24/0118%20Shiro/" title="Shiro漏洞复现">Shiro漏洞复现</a><time datetime="2023-07-24T10:13:00.000Z" title="发表于 2023-07-24 18:13:00">2023-07-24</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%85%B6%E4%BB%96/"><span class="card-category-list-name">其他</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">技术</span><span class="card-category-list-count">24</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E7%BD%91%E5%AE%89/" style="font-size: 1.45em; color: rgb(10, 134, 81)">网安</a><a href="/tags/CTF/" style="font-size: 1.38em; color: rgb(157, 61, 24)">CTF</a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.22em; color: rgb(196, 120, 62)">工具</a><a href="/tags/GIT/" style="font-size: 1.15em; color: rgb(36, 175, 4)">GIT</a><a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 1.15em; color: rgb(40, 54, 156)">转载</a><a href="/tags/Git/" style="font-size: 1.15em; color: rgb(26, 87, 82)">Git</a><a href="/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 1.15em; color: rgb(159, 84, 188)">读书</a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.15em; color: rgb(46, 141, 75)">博客</a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 1.15em; color: rgb(198, 136, 65)">美化</a><a href="/tags/%E6%95%88%E7%8E%87/" style="font-size: 1.22em; color: rgb(157, 0, 22)">效率</a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.22em; color: rgb(32, 103, 199)">笔记</a><a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.15em; color: rgb(146, 76, 158)">随笔</a><a href="/tags/SQL/" style="font-size: 1.22em; color: rgb(113, 163, 118)">SQL</a><a href="/tags/PHP/" style="font-size: 1.15em; color: rgb(141, 29, 137)">PHP</a><a href="/tags/Java/" style="font-size: 1.15em; color: rgb(12, 158, 127)">Java</a><a href="/tags/%E5%88%B7%E9%A2%98/" style="font-size: 1.15em; color: rgb(72, 128, 128)">刷题</a><a href="/tags/sql%E6%B3%A8%E5%85%A5/" style="font-size: 1.15em; color: rgb(181, 27, 40)">sql注入</a><a href="/tags/%E5%AE%A1%E8%AE%A1/" style="font-size: 1.22em; color: rgb(197, 59, 2)">审计</a><a href="/tags/cms/" style="font-size: 1.22em; color: rgb(170, 117, 39)">cms</a><a href="/tags/HW/" style="font-size: 1.15em; color: rgb(175, 178, 141)">HW</a><a href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" style="font-size: 1.3em; color: rgb(115, 200, 79)">漏洞复现</a><a href="/tags/fastjson/" style="font-size: 1.15em; color: rgb(18, 183, 159)">fastjson</a><a href="/tags/%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/" style="font-size: 1.3em; color: rgb(44, 188, 186)">组件漏洞</a><a href="/tags/JWT/" style="font-size: 1.15em; color: rgb(106, 191, 111)">JWT</a><a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 1.22em; color: rgb(15, 117, 24)">反序列化</a><a href="/tags/python-CTF/" style="font-size: 1.15em; color: rgb(114, 29, 50)">python - CTF</a><a href="/tags/SSRF/" style="font-size: 1.15em; color: rgb(167, 89, 113)">SSRF</a><a href="/tags/redis/" style="font-size: 1.15em; color: rgb(106, 38, 98)">redis</a><a href="/tags/%E6%8F%90%E6%9D%83/" style="font-size: 1.15em; color: rgb(15, 186, 100)">提权</a><a href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" style="font-size: 1.15em; color: rgb(139, 52, 33)">文件包含</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">29</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-10-14T18:48:30.978Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://musewithwind-1313815601.cos.ap-chengdu.myqcloud.com/bizhi.webp')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By zha0fe1</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://file.crazywong.com/npm/@fancyapps/ui@latest/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function subtitleType () {
  getScript('https://yijuzhan.com/api/word.php?m=js').then(() => {
    const con = str[0]
    if (true) {
      const from = '出自 ' + str[1]
      const sub = ["在晚钟和鸣中，过去一天和过去无意义的一生没什么不同","当暮色沉降，那些美好、爱情，就是浓雾霭霭的山谷里暖黄色的路灯"]
      sub.unshift(con, from)
      window.typed = new Typed('#subtitle', {
        strings: sub,
        startDelay: 300,
        typeSpeed: 150,
        loop: true,
        backSpeed: 50,
      })
    } else {
      document.getElementById('subtitle').innerHTML = con
    }
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><div class="aplayer no-destroy" data-id="2540031947" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" data-volume="0.5" muted></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://file.crazywong.com/npm/butterfly-extsrc@1.1.3/src/click-show-text.js" data-mobile="false" data-text="野鹤,纷飞,日暮,不思归" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://npm.elemecdn.com/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://file.crazywong.com/npm/pjax@latest/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>